<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Nova by redjazz96</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Nova</h1>
        <h2>Software management system.  Boom.</h2>
        <a href="https://github.com/redjazz96/nova" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a name="nova" class="anchor" href="#nova"><span class="octicon octicon-link"></span></a>Nova</h1>

<p>Nova's main purpose is to help administrate software in a repeatable and predictable manner.  Nova uses predefined scripts (called <code>Star</code>s) in order to help do this.  Nova has its own protocol (called starbound) in order to communicate with servers securely.</p>

<h2>
<a name="stars" class="anchor" href="#stars"><span class="octicon octicon-link"></span></a>Stars</h2>

<p>A star is a simple Ruby script for manage a specific type of software.  They are defined like the following star:</p>

<div class="highlight"><pre><span class="no">Nova</span> <span class="ss">star</span><span class="p">:</span> <span class="ss">:some_star</span> <span class="k">do</span>

  <span class="n">metadata</span> <span class="k">do</span>
    <span class="c1"># This means that this star requires ruby version 2.0 on the server the star is going to be</span>
    <span class="c1"># operating on.  Note the way I phrased that; the star might not be operating on the local</span>
    <span class="c1"># computer.</span>
    <span class="n">requires_ruby</span> <span class="ss">:ruby</span><span class="p">,</span> <span class="s2">"2.0"</span>

    <span class="n">requires_platform</span> <span class="ss">:posix</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>

<p>With this definition, the star will fail to run on servers that don't have any ruby that is compatible with MRI 2.0 in terms of syntax, and don't have a POSIX-compliant platform (i.e. Linux or OSX).  It also does absolutely nothing, but we're gonna modify it to add some stuff for it to do:</p>

<div class="highlight"><pre><span class="no">Nova</span> <span class="ss">star</span><span class="p">:</span> <span class="ss">:some_star</span> <span class="k">do</span>
  <span class="n">to</span> <span class="ss">:echo</span><span class="p">,</span> <span class="ss">requires</span><span class="p">:</span> <span class="o">[</span><span class="ss">:data</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">options</span><span class="o">|</span>
    <span class="n">line</span><span class="p">(</span><span class="s2">"echo"</span><span class="p">,</span> <span class="s2">"{arg}"</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="ss">arg</span><span class="p">:</span> <span class="n">options</span><span class="o">[</span><span class="ss">:data</span><span class="o">]</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>

<p>Here we create an <code>:echo</code> event handler that echos on the command line for the platform the given data.  The event requires one argument, called <code>:data</code>, which is then passed to the command line when it echos.  Other options may be passed, and they may be ignored.  If <code>:data</code> is not provided, the event will fail to run.  The event can also provide defaults, but cannot provide defaults for required options.</p>

<div class="highlight"><pre><span class="ss">Nova</span><span class="p">:</span><span class="ss">:Star</span><span class="o">.</span><span class="n">some_star</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="ss">:echo</span><span class="p">,</span> <span class="ss">data</span><span class="p">:</span> <span class="s2">"hello world"</span><span class="p">)</span>
</pre></div>

<p>This runs the event we just created on the star, passing in our required option.  Note that the actual result, the "hello world", is not output to the standard output by default; it's returned as a result from the <code>line()#run</code> method (see <a href="http://rdoc.info/github/redjazz96/command-runner/Command/Runner/Message"><code>Command::Runner::Message</code></a> for more information on that).  The <code>#run</code> event on the star returns the value from the block, so we have the result of that method ( <em>note: if the event could not be found, it'll return an instance of an error instead.</em> ).</p>

<p>That's it for this, read the wiki for more information!</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/redjazz96/nova/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/redjazz96/nova/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/redjazz96/nova"></a> is maintained by <a href="https://github.com/redjazz96">redjazz96</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>